{"version":3,"file":"vue.js","sources":["../src/utils.js","../src/globalApi.js","../src/compiler/parse.js","../src/compiler/index.js","../src/observe/dep.js","../src/observe/watch.js","../src/vnode/index.js","../src/vnode/patch.js","../src/lifecycle.js","../src/observe/arr.js","../src/observe/index.js","../src/state.js","../src/init.js","../src/index.js"],"sourcesContent":["const stracs = {};\nconst LIFECYCLE = [\"beforeCreate\", \"created\"];\nLIFECYCLE.forEach((hook) => {\n  stracs[hook] = function (p, c) {\n    if (c) {\n      if (p) {\n        return p.concat(c);\n      } else {\n        return [c];\n      }\n    } else {\n      return p;\n    }\n  };\n});\n\nstracs.components = function (parentVal, childVal) {\n  console.log(parentVal, childVal);\n  const res = Object.create(parentVal);\n\n  if (childVal) {\n    for (let key in childVal) {\n      res[key] = childVal[key]; // 返回的是构造的对象 可以拿到父亲原型上的属性，并且将儿子的都拷贝到自己身上\n    }\n  }\n\n  return res;\n};\n\nexport function mergeOptions(parent, chidren) {\n  const options = {};\n  for (let key in parent) {\n    mergeFiled(key);\n  }\n  for (let key in chidren) {\n    if (!parent.hasOwnProperty(key)) {\n      mergeFiled(key);\n    }\n  }\n  function mergeFiled(key) {\n    // 策略 减少判断逻辑\n    if (stracs[key]) {\n      options[key] = stracs[key](parent[key], chidren[key]);\n    } else {\n      options[key] = chidren[key] || parent[key];\n    }\n  }\n  return options;\n}\n","import { mergeOptions } from \"./utils\";\n\nexport function initGlobalApi(Vue) {\n  Vue.options = {\n    _base: Vue,\n  };\n  Vue.mixin = function (mixin) {\n    this.options = mergeOptions(this.options, mixin);\n    return this;\n  };\n  Vue.extend = function (options) {\n    function Sub(options = {}) {\n      this._init(options);\n    }\n    Sub.prototype = Object.create(Vue.prototype);\n    Sub.prototype.constructor = Sub;\n    Sub.options = mergeOptions(Vue.options, options); // 保存用户传递的选项\n\n    return Sub;\n  };\n  Vue.options.components = {};\n  Vue.component = function (id, definition) {\n    definition =\n      typeof definition === \"function\" ? definition : Vue.extend(definition);\n    Vue.options.components[id] = definition;\n  };\n}\n","const ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`;\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`;\nconst startTagOpen = new RegExp(`^<${qnameCapture}`); // 他匹配到的分组是一个 标签名  <xxx 匹配到的是开始 标签的名字\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`); // 匹配的是</xxxx>  最终匹配到的分组就是结束标签的名字\nconst attribute =\n  /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/; // 匹配属性\n// 第一个分组就是属性的key value 就是 分组3/分组4/分组五\nconst startTagClose = /^\\s*(\\/?)>/; // <div> <br/>\n\n// vue3 采用的不是使用正则\n// 对模板进行编译处理\n\nexport function parseHTML(html) {\n  // html最开始肯定是一个  </div>\n\n  const ELEMENT_TYPE = 1;\n  const TEXT_TYPE = 3;\n  const stack = []; // 用于存放元素的\n  let currentParent; // 指向的是栈中的最后一个\n  let root;\n\n  // 最终需要转化成一颗抽象语法树\n  function createASTElement(tag, attrs) {\n    return {\n      tag,\n      type: ELEMENT_TYPE,\n      children: [],\n      attrs,\n      parent: null,\n    };\n  }\n  // 利用栈型结构 来构造一颗树\n  function start(tag, attrs) {\n    let node = createASTElement(tag, attrs); // 创造一个ast节点\n    if (!root) {\n      // 看一下是否是空树\n      root = node; // 如果为空则当前是树的根节点\n    }\n    if (currentParent) {\n      node.parent = currentParent; // 只赋予了parent属性\n      currentParent.children.push(node); // 还需要让父亲记住自己\n    }\n    stack.push(node);\n    currentParent = node; // currentParent为栈中的最后一个\n  }\n  function chars(text) {\n    // 文本直接放到当前指向的节点中\n    text = text.replace(/\\s/g, ''); // 如果空格超过2就删除2个以上的\n    text &&\n      currentParent.children.push({\n        type: TEXT_TYPE,\n        text,\n        parent: currentParent,\n      });\n  }\n  function end(tag) {\n    let node = stack.pop(); // 弹出最后一个, 校验标签是否合法\n    currentParent = stack[stack.length - 1];\n  }\n  function advance(n) {\n    html = html.substring(n);\n  }\n  function parseStartTag() {\n    const start = html.match(startTagOpen);\n    if (start) {\n      const match = {\n        tagName: start[1], // 标签名\n        attrs: [],\n      };\n      advance(start[0].length);\n      // 如果不是开始标签的结束 就一直匹配下去\n      let attr, end;\n      while (\n        !(end = html.match(startTagClose)) &&\n        (attr = html.match(attribute))\n      ) {\n        advance(attr[0].length);\n        match.attrs.push({\n          name: attr[1],\n          value: attr[3] || attr[4] || attr[5] || true,\n        });\n      }\n      if (end) {\n        advance(end[0].length);\n      }\n      return match;\n    }\n    return false; // 不是开始标签\n  }\n  while (html) {\n    // 如果textEnd 为0 说明是一个开始标签或者结束标签\n    // 如果textEnd > 0说明就是文本的结束位置\n    let textEnd = html.indexOf(\"<\"); // 如果indexOf中的索引是0 则说明是个标签\n    if (textEnd == 0) {\n      const startTagMatch = parseStartTag(); // 开始标签的匹配结果\n      if (startTagMatch) {\n        // 解析到的开始标签\n        start(startTagMatch.tagName, startTagMatch.attrs);\n        continue;\n      }\n      let endTagMatch = html.match(endTag);\n      if (endTagMatch) {\n        advance(endTagMatch[0].length);\n        end(endTagMatch[1]);\n        continue;\n      }\n    }\n    if (textEnd > 0) {\n      let text = html.substring(0, textEnd); // 文本内容\n      if (text) {\n        chars(text);\n        advance(text.length); // 解析到的文本\n      }\n    }\n  }\n  return root;\n}\n","import { parseHTML } from \"./parse\";\n\nfunction genProps(attrs) {\n  let str = \"\"; // {name,value}\n  for (let i = 0; i < attrs.length; i++) {\n    let attr = attrs[i];\n    if (attr.name === \"style\") {\n      // color:red;background:red => {color:'red'}\n      let obj = {};\n      attr.value.split(\";\").forEach((item) => {\n        // qs 库\n        let [key, value] = item.split(\":\");\n        obj[key] = value;\n      });\n      attr.value = obj;\n    }\n    str += `${attr.name}:${JSON.stringify(attr.value)},`; // a:b,c:d,\n  }\n  return `{${str.slice(0, -1)}}`;\n}\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g; // {{ asdsadsa }}  匹配到的内容就是我们表达式的变量\nfunction gen(node) {\n  if (node.type === 1) {\n    return codegen(node);\n  } else {\n    // 文本\n    let text = node.text;\n    if (!defaultTagRE.test(text)) {\n      return `_v(${JSON.stringify(text)})`;\n    } else {\n      //_v( _s(name)+'hello' + _s(name))\n      let tokens = [];\n      let match;\n      defaultTagRE.lastIndex = 0;\n      let lastIndex = 0;\n      // split\n      while ((match = defaultTagRE.exec(text))) {\n        let index = match.index; // 匹配的位置  {{name}} hello  {{name}} hello\n        if (index > lastIndex) {\n          tokens.push(JSON.stringify(text.slice(lastIndex, index)));\n        }\n        tokens.push(`_s(${match[1].trim()})`);\n        lastIndex = index + match[0].length;\n      }\n      if (lastIndex < text.length) {\n        tokens.push(JSON.stringify(text.slice(lastIndex)));\n      }\n      return `_v(${tokens.join(\"+\")})`;\n    }\n  }\n}\nfunction genChildren(children) {\n  return children.map((child) => gen(child)).join(\",\");\n}\nfunction codegen(ast) {\n  let children = genChildren(ast.children);\n  let code = `_c('${ast.tag}',${\n    ast.attrs.length > 0 ? genProps(ast.attrs) : \"null\"\n  }${ast.children.length ? `,${children}` : \"\"})`;\n\n  return code;\n}\nexport function compileToFunction(template) {\n  // 1.就是将template 转化成ast语法树\n  let ast = parseHTML(template);\n\n  // 2.生成render方法 (render方法执行后的返回的结果就是 虚拟DOM)\n\n  // 模板引擎的实现原理 就是 with  + new Function\n\n  let code = codegen(ast);\n  code = `with(this){return ${code}}`;\n  let render = new Function(code); // 根据代码生成render函数\n  //  _c('div',{id:'app'},_c('div',{style:{color:'red'}},  _v(_s(vm.name)+'hello'),_c('span',undefined,  _v(_s(age))))\n\n  return render;\n}\n\n// <xxx\n// <namepsace:xxx\n// color   =   \"asdsada\"     c= 'asdasd'  d=  asdasdsa\n","let id = 0;\n\nclass Dep {\n  constructor() {\n    this.id = id++;\n    this.subs = []; // 存放watch\n  }\n  depend() {\n    Dep.target.addDep(this);\n    // this.subs.push(Dep.target);\n  }\n  notify() {\n    this.subs.forEach((watch) => watch.update());\n  }\n  addSub(watcher) {\n    this.subs.push(watcher);\n  }\n}\nlet stack = [];\nexport function pushTarget(watcher) {\n  stack.push(watcher);\n  Dep.target = watcher;\n}\nexport function popTarget() {\n  stack.pop();\n  Dep.target = stack[stack.length - 1];\n}\nexport default Dep;\n","import Dep, { popTarget, pushTarget } from \"./dep\";\n\nlet id = 0;\nclass Watcher {\n  // 不同组件有不同 watcher\n  constructor(vm, exprOrfn, options, cb) {\n    this.id = id++;\n    this.cb = cb;\n    this.renderWatcher = options;\n    this.user = options.user;\n    if (typeof exprOrfn === \"string\") {\n      this.getter = function () {\n        return vm[exprOrfn];\n      };\n    } else {\n      this.getter = exprOrfn;\n    }\n    this.depsId = new Set();\n    this.deps = [];\n    this.vm = vm;\n    this.lazy = options.lazy;\n    this.dirty = this.lazy;\n    this.value = this.lazy ? undefined : this.get();\n  }\n  get() {\n    pushTarget(this);\n    let value = this.getter.call(this.vm);\n    popTarget();\n    return value;\n  }\n  evatelue() {\n    this.value = this.get();\n    this.dirty = false;\n  }\n\n  run() {\n    let oldValue = this.value;\n    let newValue = this.get();\n    if (this.user) {\n      this.cb.call(this.vm, newValue, oldValue);\n    }\n  }\n  depend() {\n    let i = this.deps.length;\n    while (i--) {\n      this.deps[i].depend();\n    }\n  }\n  update() {\n    if (this.lazy) {\n      this.dirty = true;\n    } else {\n      queueWatch(this);\n    }\n  }\n  addDep(dep) {\n    const id = dep.id;\n    if (!this.depsId.has(id)) {\n      this.deps.push(dep);\n      this.depsId.add(id);\n      dep.addSub(this);\n    }\n  }\n}\nlet queue = [];\nlet has = {};\nlet pending = false;\nfunction flushSchedluQueue() {\n  let flushQueue = queue.slice(0);\n  queue = [];\n  has = {};\n  pending = false;\n  flushQueue.forEach((q) => q.run());\n}\nfunction queueWatch(watcher) {\n  let id = watcher.id;\n  if (!has[id]) {\n    queue.push(watcher);\n    has[id] = true;\n    if (!pending) {\n      nextTick(flushSchedluQueue, 0);\n      pending = true;\n    }\n  }\n}\nlet callbacks = [];\nlet waiting = false;\nfunction flushCallback() {\n  let cbs = callbacks.slice(0);\n  callbacks = [];\n  waiting = false;\n  cbs.forEach((cb) => cb());\n}\n\nexport function nextTick(cb) {\n  callbacks.push(cb);\n  if (!waiting) {\n    Promise.resolve().then(flushCallback);\n    waiting = true;\n  }\n}\nexport default Watcher;\n","function isReservedTag(tag) {\n  return [\"a\", \"div\", \"ul\", \"li\", \"p\", \"span\", \"button\"].includes(tag);\n}\n\nexport function createElementVNode(vm, tag, data, ...children) {\n  if (data == null) {\n    data = {};\n  }\n  let key = data.key;\n  if (key) {\n    delete data.key;\n  }\n  if (isReservedTag(tag)) {\n    return vnode(vm, tag, key, data, children);\n  } else {\n    // 创造组件虚拟节点\n    let Ctor = vm.$options.components[tag];\n    return createConponentVnode(vm, tag, key, data, children, Ctor);\n  }\n}\nfunction createConponentVnode(vm, tag, key, data, children, Ctor) {\n  if (typeof Ctor === \"object\") {\n    Ctor = vm.$options._base.extend(Ctor);\n  }\n  data.hook = {\n    init() {},\n  };\n  return vnode(vm, tag, key, data, children, null, { Ctor });\n}\nexport function createTextVNode(vm, text) {\n  return vnode(vm, undefined, undefined, undefined, undefined, text);\n}\n\nfunction vnode(vm, tag, key, data, children, text, componentOptions) {\n  return {\n    vm,\n    tag,\n    data,\n    key,\n    children,\n    text,\n    componentOptions,\n  };\n}\n\nexport function isSameVnode(vnode1, vnode2) {\n  return vnode1.tag === vnode2.tag && vnode1.key === vnode2.key;\n}\n","import { isSameVnode } from \".\";\n\nexport function createElm(vnode) {\n  const { tag, data, children, text } = vnode;\n  if (typeof tag === \"string\") {\n    vnode.el = document.createElement(tag);\n    patchProps(vnode.el, {}, data);\n    children.forEach((child) => {\n      vnode.el.appendChild(createElm(child));\n    });\n  } else {\n    vnode.el = document.createTextNode(text);\n  }\n  return vnode.el;\n}\nexport function patchProps(el, oldProps, props) {\n  /* \n  老的属性中有 要删除老的\n*/\n  let oldStyles = oldProps?.style || {};\n  let newStyles = props?.style || {};\n  for (let key in oldStyles) {\n    if (!newStyles[key]) {\n      el.style[key] = \"\";\n    }\n  }\n  for (let key in oldProps) {\n    if (!props[key]) {\n      el.removeAttribute(key);\n    }\n  }\n  for (let key in props) {\n    if (key === \"style\") {\n      for (let styleName in props.style) {\n        el.style[styleName] = props.style[styleName];\n      }\n    } else {\n      el.setAttribute(key, props[key]);\n    }\n  }\n}\nexport function patch(oldVnode, vnode) {\n  const isRealElement = oldVnode.nodeType;\n  if (isRealElement) {\n    const elm = oldVnode;\n    const parentElm = elm.parentNode;\n    let newElm = createElm(vnode);\n    parentElm.insertBefore(newElm, elm.nextSibling);\n\n    parentElm.removeChild(elm);\n    return newElm;\n  } else {\n    /* \n      1.两个节点不是同一个节点 没有对比直接替换\n      2.两个节点是同一个节点\n      3.比较儿子\n    */\n    return patchVnode(oldVnode, vnode);\n  }\n}\nfunction patchVnode(oldVnode, vnode) {\n  if (!isSameVnode(oldVnode, vnode)) {\n    let el = createElm(vnode);\n    oldVnode.el.parentNode.replaceChild(el, oldVnode.el);\n    return el;\n  }\n  // 文本的情况\n  let el = (vnode.el = oldVnode.el);\n  if (!oldVnode.tag) {\n    if (oldVnode.text !== vnode.text) {\n      el.textContext = vnode.text;\n    }\n  }\n  // 是标签 我们需要比对标签的属性\n  patchProps(el, oldVnode.data, vnode.data);\n\n  let oldVNodeChildren = oldVnode.children || [];\n  let newVNodeChildren = vnode.children || [];\n  console.log(oldVnode.children);\n\n  if (oldVNodeChildren.length > 0 && newVNodeChildren.length > 0) {\n    updateChildren(el, oldVNodeChildren, newVNodeChildren);\n  } else if (oldVNodeChildren.length > 0) {\n    el.innerHTML = \"\";\n  } else if (newVNodeChildren.length > 0) {\n    // 没有老的 只有新的\n    mountChildren(el, newVNodeChildren);\n  }\n\n  return el;\n}\n\nfunction mountChildren(el, newVNodeChildren) {\n  for (let i = 0; i < newVNodeChildren.length; i++) {\n    let child = newVNodeChildren[i];\n    el.appendChild(createElm(child));\n  }\n}\nfunction updateChildren(el, oldChildren, newChildren) {\n  // 我们操作列表 经常会是有  push shift pop unshift reverse sort这些方法  （针对这些情况做一个优化）\n  // vue2中采用双指针的方式 比较两个节点\n  let oldStartIndex = 0;\n  let newStartIndex = 0;\n  let oldEndIndex = oldChildren.length - 1;\n  let newEndIndex = newChildren.length - 1;\n\n  let oldStartVnode = oldChildren[0];\n  let newStartVnode = newChildren[0];\n\n  let oldEndVnode = oldChildren[oldEndIndex];\n  let newEndVnode = newChildren[newEndIndex];\n\n  function makeIndexByKey(children) {\n    let map = {};\n    children.forEach((child, index) => {\n      map[child.key] = index;\n    });\n    return map;\n  }\n\n  let map = makeIndexByKey(oldChildren);\n\n  // 循环的时候为什么要+key\n  while (oldStartIndex <= oldEndIndex && newStartIndex <= newEndIndex) {\n    // 有任何一个不满足则停止  || 有一个为true 就继续走\n    // 双方有一方头指针，大于尾部指针则停止循环\n    if (!oldStartVnode) {\n      oldStartVnode = oldChildren[++oldStartIndex];\n    } else if (!oldEndVnode) {\n      oldEndVnode = oldChildren[--oldEndIndex];\n    } else if (isSameVnode(oldStartVnode, newStartVnode)) {\n      patchVnode(oldStartVnode, newStartVnode); // 如果是相同节点 则递归比较子节点\n      oldStartVnode = oldChildren[++oldStartIndex];\n      newStartVnode = newChildren[++newStartIndex];\n      // 比较开头节点\n    } else if (isSameVnode(oldEndVnode, newEndVnode)) {\n      patchVnode(oldEndVnode, newEndVnode); // 如果是相同节点 则递归比较子节点\n      oldEndVnode = oldChildren[--oldEndIndex];\n      newEndVnode = newChildren[--newEndIndex];\n      // 比较开头节点\n    } else if (isSameVnode(oldEndVnode, newStartVnode)) {\n      patchVnode(oldEndVnode, newStartVnode);\n      // insertBefore 具备移动性 会将原来的元素移动走\n      el.insertBefore(oldEndVnode.el, oldStartVnode.el); // 将老的尾巴移动到老的前面去\n      oldEndVnode = oldChildren[--oldEndIndex];\n      newStartVnode = newChildren[++newStartIndex];\n    } else if (isSameVnode(oldStartVnode, newEndVnode)) {\n      patchVnode(oldStartVnode, newEndVnode);\n      // insertBefore 具备移动性 会将原来的元素移动走\n      el.insertBefore(oldStartVnode.el, oldEndVnode.el.nextSibling); // 将老的尾巴移动到老的前面去\n      oldStartVnode = oldChildren[++oldStartIndex];\n      newEndVnode = newChildren[--newEndIndex];\n    } else {\n      // 在给动态列表添加key的时候 要尽量避免用索引，因为索引前后都是从0 开始 ， 可能会发生错误复用\n      // 乱序比对\n      // 根据老的列表做一个映射关系 ，用新的去找，找到则移动，找不到则添加，最后多余的就删除\n      let moveIndex = map[newStartVnode.key]; // 如果拿到则说明是我要移动的索引\n      if (moveIndex !== undefined) {\n        let moveVnode = oldChildren[moveIndex]; // 找到对应的虚拟节点 复用\n        el.insertBefore(moveVnode.el, oldStartVnode.el);\n        oldChildren[moveIndex] = undefined; // 表示这个节点已经移动走了\n        patchVnode(moveVnode, newStartVnode); // 比对属性和子节点\n      } else {\n        el.insertBefore(createElm(newStartVnode), oldStartVnode.el);\n      }\n      newStartVnode = newChildren[++newStartIndex];\n    }\n  }\n  if (newStartIndex <= newEndIndex) {\n    // 新的多了 多余的就插入进去\n    for (let i = newStartIndex; i <= newEndIndex; i++) {\n      let childEl = createElm(newChildren[i]);\n      // 这里可能是像后追加 ，还有可能是向前追加\n      let anchor = newChildren[newEndIndex + 1]\n        ? newChildren[newEndIndex + 1].el\n        : null; // 获取下一个元素\n      // el.appendChild(childEl);\n      el.insertBefore(childEl, anchor); // anchor 为null的时候则会认为是appendChild\n    }\n  }\n\n  if (oldStartIndex <= oldEndIndex) {\n    // 老的对了，需要删除老的\n    for (let i = oldStartIndex; i <= oldEndIndex; i++) {\n      if (oldChildren[i]) {\n        let childEl = oldChildren[i].el;\n        el.removeChild(childEl);\n      }\n    }\n  }\n\n  // 我们为了 比较两个儿子的时候 ，增高性能 我们会有一些优化手段\n  // 如果批量像页面中修改出入内容 浏览器会自动优化\n}\n","import Watcher from \"./observe/watch\";\nimport { createElementVNode, createTextVNode } from \"./vnode\";\nimport { patch } from \"./vnode/patch\";\n\nexport function initLifeCycle(Vue) {\n  Vue.prototype._c = function () {\n    return createElementVNode(this, ...arguments);\n  };\n  Vue.prototype._v = function () {\n    return createTextVNode(this, ...arguments);\n  };\n  Vue.prototype._s = function (value) {\n    if (typeof value !== \"object\") return value;\n    return JSON.stringify(value);\n  };\n  Vue.prototype._update = function (vnode) {\n    const vm = this;\n    const el = vm.$el;\n    const preVNode = vm._vnode;\n    vm._vnode = vnode;\n    if (preVNode) {\n      vm.$el = patch(preVNode, vnode);\n    } else {\n      vm.$el = patch(el, vnode);\n    }\n  };\n  Vue.prototype._render = function () {\n    return this.$options.render.call(this);\n  };\n}\n\nexport function mountComponent(vm, el) {\n  vm.$el = el;\n  const updateComponent = () => {\n    vm._update(vm._render());\n  };\n  new Watcher(vm, updateComponent, true);\n}\n\nexport function callHooks(vm, hook) {\n  const handlers = vm.$options[hook];\n  if (handlers) {\n    handlers.forEach((handle) => handle(vm));\n  }\n}\n","// 监听数组变异方法（修改数组本身）  7个\n\nlet oldArrayPrototype = Array.prototype;\nexport let newArrayPrototype = Object.create(oldArrayPrototype);\n\nconst methods = [\n  \"push\",\n  \"shift\",\n  \"pop\",\n  \"unshift\",\n  \"reverse\",\n  \"sort\",\n  \"splice\",\n];\nmethods.forEach((method) => {\n  newArrayPrototype[method] = function (...args) {\n    let result = oldArrayPrototype[method].call(this, ...args); // 函数劫持   切片编程\n    let inserted;\n    let ob = this.__ob__;\n    switch (method) {\n      case \"push\":\n      case \"unshift\":\n        inserted = args;\n        break;\n      case \"splice\":\n        inserted = args.slice(2);\n      default:\n        break;\n    }\n    ob.observeArr(inserted);\n    ob.dep.notify();\n    return result;\n  };\n});\n","import { newArrayPrototype } from \"./arr\";\nimport Dep from \"./dep\";\n\nclass Observe {\n  constructor(data) {\n    this.dep = new Dep();\n    Object.defineProperty(data, \"__ob__\", {\n      value: this,\n      enumerable: false,\n    });\n    if (Array.isArray(data)) {\n      // 保留原数组特性并重写部分方法\n      data.__proto__ = newArrayPrototype;\n      this.observeArr(data); // 数组中放有对象，继续监控对象变化\n    } else {\n      this.walk(data);\n    }\n  }\n  walk(data) {\n    // Object.defineProperty 只能劫持已经存在的属性\n    // 重新定义属性\n    Object.keys(data).forEach((key) => defineReactive(data, key, data[key]));\n  }\n  observeArr(data) {\n    data.forEach((item) => observe(item));\n  }\n}\nfunction depengArray(value) {\n  value.forEach((item) => {\n    item.__ob__?.dep.depend();\n    if (Array.isArray(item)) {\n      depengArray(item);\n    }\n  });\n}\n// 闭包 value  //属性劫持\nfunction defineReactive(target, key, value) {\n  let childOb = observe(value);\n  let dep = new Dep();\n  Object.defineProperty(target, key, {\n    get() {\n      if (Dep.target) {\n        dep.depend();\n        if (childOb) {\n          childOb.dep.depend();\n          if (Array.isArray(value)) {\n            depengArray(value);\n          }\n        }\n      }\n      // 取值的时候\n      return value;\n    },\n    set(newValue) {\n      // 设置 修改值\n      if (value === newValue) return;\n      observe(newValue);\n      value = newValue;\n      dep.notify();\n    },\n  });\n}\nexport function observe(data) {\n  if (typeof data !== \"object\" || data === null) return;\n  // 如果一个对象被劫持了，就不需要劫持了，可以增加一个实例，实例来判断是否被劫持过\n  if (data.__ob__ instanceof Observe) {\n    return data.__ob__;\n  }\n  return new Observe(data);\n}\n","import Dep from \"./observe/dep\";\nimport { observe } from \"./observe/index\";\nimport Watcher, { nextTick } from \"./observe/watch\";\n\nexport function initState(vm) {\n  const opts = vm.$options;\n  if (opts.data) {\n    initDate(vm);\n  }\n  if (opts.computed) {\n    initComputed(vm);\n  }\n  if (opts.watch) {\n    initWatch(vm);\n  }\n}\nfunction proxy(vm, target, key) {\n  Object.defineProperty(vm, key, {\n    get() {\n      return vm[target][key];\n    },\n    set(newValue) {\n      vm[target][key] = newValue;\n    },\n  });\n}\nfunction initDate(vm) {\n  let data = vm.$options.data;\n  data = typeof data === \"function\" ? data.call(vm) : data;\n  vm._data = data;\n  for (let key in data) {\n    proxy(vm, \"_data\", key);\n  }\n  observe(data);\n}\nfunction initComputed(vm) {\n  const computed = vm.$options.computed;\n  const watchers = (vm._computedWatchers = {});\n  for (let key in computed) {\n    let userDef = computed[key];\n    let fn = typeof userDef === \"function\" ? userDef : userDef.get;\n\n    watchers[key] = new Watcher(vm, fn, { lazy: true });\n\n    defineComputed(vm, key, userDef);\n  }\n}\nfunction defineComputed(vm, key, userDef) {\n  const setter = userDef.set || (() => {});\n  Object.defineProperty(vm, key, {\n    get: createComputedGetter(key),\n    set: setter,\n  });\n}\nfunction createComputedGetter(key) {\n  return function () {\n    const watcher = this._computedWatchers[key];\n    if (watcher.dirty) {\n      watcher.evatelue();\n    }\n    if (Dep.target) {\n      watcher.depend();\n    }\n    return watcher.value;\n  };\n}\n\nfunction initWatch(vm) {\n  const watch = vm.$options.watch;\n  for (let key in watch) {\n    const handler = watch[key]; // 字符串 数组 函数\n    if (Array.isArray(handler)) {\n      for (let i = 0; i < handler.length; i++) {\n        createWatch(vm, key, handler[i]);\n      }\n    } else {\n      createWatch(vm, key, handler);\n    }\n  }\n}\n\nfunction createWatch(vm, key, handler) {\n  if (typeof handler === \"string\") {\n    handler = vm[handler];\n  }\n  return vm.$watch(key, handler);\n}\n\nexport function initStateMixin(Vue) {\n  Vue.prototype.$watch = function (expreOrFn, cb) {\n    new Watcher(this, expreOrFn, { user: true }, cb);\n  };\n  Vue.prototype.$nextTick = nextTick;\n}\n","import { compileToFunction } from \"./compiler/index\";\nimport { callHooks, mountComponent } from \"./lifecycle\";\nimport { initState } from \"./state\";\nimport { mergeOptions } from \"./utils\";\n\nexport function initMixin(Vue) {\n  Vue.prototype._init = function (options) {\n    const vm = this;\n    vm.$options = mergeOptions(this.constructor.options, options); // 将 用户的选项配置 挂到vm实例上\n    callHooks(vm, \"beforeCreate\");\n    initState(vm);\n    callHooks(vm, \"created\");\n\n    if (options.el) {\n      vm.$mount(options.el); //数据的挂载\n    }\n  };\n  Vue.prototype.$mount = function (el) {\n    const vm = this;\n    let opts = vm.$options;\n    el = document.querySelector(el);\n    if (!opts.render) {\n      let template;\n      if (!opts.template && el) {\n        template = el.outerHTML;\n      } else {\n        template = opts.template;\n      }\n      if (template) {\n        const render = compileToFunction(template);\n        opts.render = render;\n      }\n    }\n    mountComponent(vm, el); // 组建初渲染 挂载\n  };\n}\n","import { initGlobalApi } from \"./globalApi\";\nimport { initMixin } from \"./init\";\nimport { initLifeCycle } from \"./lifecycle\";\nimport { initStateMixin } from \"./state\";\n\nfunction Vue(options) {\n  this._init(options);\n}\n\ninitLifeCycle(Vue); // 渲染逻辑\ninitMixin(Vue); // 扩展 init\ninitGlobalApi(Vue); // 全局API\ninitStateMixin(Vue); // nextTick\n// const vm1 = new Vue({\n//   data() {\n//     return {\n//       name: \"小胡\",\n//     };\n//   },\n// });\n// const vm2 = new Vue({\n//   data() {\n//     return {\n//       name: \"小马\",\n//     };\n//   },\n// });\n// let render1 = compileToFunction(\n//   `<ul style=\"color: blue;background: black;\">\n//    <li key='a'>a</li>\n//    <li key='b'>b</li>\n//    <li key='c'>c</li>\n// </ul>`\n// );\n// let preVNode = render1.call(vm1);\n// let el = createElm(preVNode);\n// document.body.appendChild(el);\n// let render2 = compileToFunction(\n//   `<ul style=\"color: green;background: red;\">\n//    <li key='a'>a</li>\n//    <li key='b'>b</li>\n//    <li key='c'>c</li>\n//    <li key='d'>d</li>\n// </ul>`\n// );\n// let nextVnode = render2.call(vm2);\n// setTimeout(() => {\n//   patch(preVNode, nextVnode);\n// }, 1000);\n\nexport default Vue;\n\n\n// a t u n\n// a s u f e"],"names":["stracs","LIFECYCLE","forEach","hook","p","c","concat","components","parentVal","childVal","console","log","res","Object","create","key","mergeOptions","parent","chidren","options","mergeFiled","hasOwnProperty","initGlobalApi","Vue","_base","mixin","extend","Sub","_init","prototype","constructor","component","id","definition","ncname","qnameCapture","startTagOpen","RegExp","endTag","attribute","startTagClose","parseHTML","html","ELEMENT_TYPE","TEXT_TYPE","stack","currentParent","root","createASTElement","tag","attrs","type","children","start","node","push","chars","text","replace","end","pop","length","advance","n","substring","parseStartTag","match","tagName","attr","name","value","textEnd","indexOf","startTagMatch","endTagMatch","genProps","str","i","obj","split","item","JSON","stringify","slice","defaultTagRE","gen","codegen","test","tokens","lastIndex","exec","index","trim","join","genChildren","map","child","ast","code","compileToFunction","template","render","Function","Dep","subs","target","addDep","watch","update","watcher","pushTarget","popTarget","Watcher","vm","exprOrfn","cb","renderWatcher","user","getter","depsId","Set","deps","lazy","dirty","undefined","get","call","oldValue","newValue","depend","queueWatch","dep","has","add","addSub","queue","pending","flushSchedluQueue","flushQueue","q","run","nextTick","callbacks","waiting","flushCallback","cbs","Promise","resolve","then","isReservedTag","includes","createElementVNode","data","vnode","Ctor","$options","createConponentVnode","init","createTextVNode","componentOptions","isSameVnode","vnode1","vnode2","createElm","el","document","createElement","patchProps","appendChild","createTextNode","oldProps","props","oldStyles","style","newStyles","removeAttribute","styleName","setAttribute","patch","oldVnode","isRealElement","nodeType","elm","parentElm","parentNode","newElm","insertBefore","nextSibling","removeChild","patchVnode","replaceChild","textContext","oldVNodeChildren","newVNodeChildren","updateChildren","innerHTML","mountChildren","oldChildren","newChildren","oldStartIndex","newStartIndex","oldEndIndex","newEndIndex","oldStartVnode","newStartVnode","oldEndVnode","newEndVnode","makeIndexByKey","moveIndex","moveVnode","childEl","anchor","initLifeCycle","_c","arguments","_v","_s","_update","$el","preVNode","_vnode","_render","mountComponent","updateComponent","callHooks","handlers","handle","oldArrayPrototype","Array","newArrayPrototype","methods","method","args","result","inserted","ob","__ob__","observeArr","notify","Observe","defineProperty","enumerable","isArray","__proto__","walk","keys","defineReactive","observe","depengArray","childOb","set","initState","opts","initDate","computed","initComputed","initWatch","proxy","_data","watchers","_computedWatchers","userDef","fn","defineComputed","setter","createComputedGetter","evatelue","handler","createWatch","$watch","initStateMixin","expreOrFn","$nextTick","initMixin","$mount","querySelector","outerHTML"],"mappings":"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"}